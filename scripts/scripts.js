"use strict";function shake(e,n,t){var o=new TimelineLite;TweenLite.set(e,{x:"+=0"});for(var r=e._gsTransform,i={x:r.x,y:r.y,rotation:r.rotation},a=0;n>a;a++)o.to(e,t,{x:i.x+Utils.randomInRange(-4,4),y:i.y+Utils.randomInRange(-2,2),rotation:i.rotation+Utils.randomInRange(-5,5)});return o.to(e,t,{x:i.x,y:i.y,scale:i.scale,rotation:i.rotation}),o}var Utils={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return Utils.Android()||Utils.BlackBerry()||Utils.iOS()||Utils.Opera()||Utils.Windows()},randomInRange:function(e,n){return Math.floor(Math.random()*(n-e+1))+e}},$borders=[].slice.call(document.querySelectorAll(".border-inner"),0),textMove=[].slice.call(document.querySelectorAll(".move-in"),0),formBtn=document.querySelector(".form-btn"),form=document.querySelector(".form"),subscribeOpen=document.getElementById("subscribeOpen"),subscribeInput=document.getElementById("subscribeInput"),subscribeInput=document.getElementById("subscribeInput"),wrapperRombo=document.getElementById("wrapper"),logoMain=document.getElementById("logo"),rectangleLogo=document.getElementById("rectangleLogo"),rectangleLogoInner=document.getElementById("rectangleLogoInner"),titleLogo=document.querySelector(".titleLogo"),_width=window.innerWidth,_height=window.innerHeight,nRombo=24,timer=1.4,isFirefox=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,setObj=function(){var e=document.documentElement.clientWidth/window.innerWidth,n=window.innerHeight*e;Utils.iOS()&&n>window.innerWidth&&(document.querySelector(".Main").style.height=n+"px",document.querySelector(".Main").style.minHeight=n+"px"),TweenMax.set(document.querySelectorAll(".border-inner")[0],{y:-32}),TweenMax.set(document.querySelectorAll(".border-inner")[1],{y:32}),TweenMax.set(document.querySelectorAll(".border-inner")[2],{x:-32}),TweenMax.set(document.querySelectorAll(".border-inner")[3],{x:32}),TweenMax.set(formBtn,{position:"absolute",left:"50%",xPercent:-50,y:150}),TweenMax.set(form,{position:"absolute",left:"50%",xPercent:-50,y:150,zIndex:-1}),TweenMax.set(rectangleLogo,{scale:300,rotation:-280,transformOrigin:"50% 50%"}),TweenMax.set(rectangleLogoInner,{scale:300,rotation:-120,transformOrigin:"50% 50%"}),TweenMax.set([titleLogo,textMove],{visibility:"visible"})},logo=function(){var e=new TimelineMax;return TweenMax.set(logoMain,{visibility:"visible"}),e.to(rectangleLogoInner,1.2,{scale:1,rotation:0,force3D:!0,ease:Power2.easeOut}).to(rectangleLogo,1.2,{scale:1,rotation:32,force3D:!0,ease:Power2.easeOut},"-=1"),e},btnAbout=function(){var e=new TimelineMax;return TweenMax.set(formBtn,{visibility:"visible"}),e.to(formBtn,1.2,{y:0,opacity:1,ease:Power2.easeOut,onComplete:function(){TweenMax.set(formBtn,{zIndex:30})}}),e},border=function(){var e=new TimelineMax;return e.to($borders,1.2,{x:0,y:0,force3D:!0,ease:Power1.easeOut,onComplete:function(){document.body.classList.remove("overflow")}}),e},romboInit=function(){for(var e=0;nRombo>e;e++){var n=document.createElement("div"),t=document.createElement("div");wrapperRombo.appendChild(n),n.className="box",document.querySelectorAll(".box")[e].appendChild(t),t.className="rombo",Utils.any()?TweenMax.set(document.querySelectorAll(".rombo")[e],{top:Utils.randomInRange(-40,40),left:Utils.randomInRange(-40,40),y:0,scale:0,opacity:0,transformOrigin:"50% 50%",rotation:Utils.randomInRange(-320,320)}):TweenMax.set(document.querySelectorAll(".rombo")[e],{top:Utils.randomInRange(-80,80),left:Utils.randomInRange(-80,80),y:-100,scale:0,opacity:0,transformOrigin:"50% 50%",rotation:Utils.randomInRange(-320,320)})}},romboAnimation=function(){var e=[].slice.call(document.querySelectorAll(".rombo"),0),n=new TimelineMax;return n.staggerTo(e,1.2,{y:0,scale:1,opacity:1,force3D:!0,ease:Power2.easeOut},.06),n},onTlComplete=function(){subscribeOpen.addEventListener("click",function(e){e.preventDefault(),TweenMax.set(formBtn,{zIndex:1}),TweenMax.to(formBtn,.3,{y:150,opacity:0,ease:Power2.easeOut,onComplete:function(){TweenMax.set(formBtn,{visibility:"hidden"}),TweenMax.set(form,{visibility:"visible",zIndex:1}),TweenMax.to(form,.3,{y:0,opacity:1,ease:Power2.easeOut,onComplete:function(){TweenMax.set(form,{zIndex:12}),subscribeInput.focus()}})}})},!1)},init=function(){setObj(),romboInit();var e=new TimelineMax({delay:.3,onComplete:onTlComplete});e.add(logo(),"scene1").add(border(),"-=0.8","scene2").add(btnAbout(),"-=1.2","scene4").add(romboAnimation(),"-=2","scene5"),e.timeScale(timer)};document.addEventListener("DOMContentLoaded",function(e){init()}),$(document).ready(function(){function e(e,o){e.submit(function(r){if(r.preventDefault(),n(e))o.addClass("msg"),o.html("Subscribing..."),t(e,o);else{var i="A valid email address must be provided.";shake(form,15,.01),o.html(i),o.addClass("msg")}})}function n(e){var n=e.find("input[type='email']").val();return n&&n.length?-1!=n.indexOf("@"):!1}function t(e,n){$.ajax({type:"GET",url:e.attr("action"),data:e.serialize(),cache:!1,dataType:"jsonp",jsonp:"c",contentType:"application/json; charset=utf-8",error:function(e){},success:function(e){if("success"!=e.result){var t=e.msg||"Sorry. Unable to subscribe. Please try again later.";n.addClass(".msg"),e.msg&&e.msg.indexOf("already subscribed")>=0&&(t="You're already subscribed. Thank you.",n.addClass("msg")),n.html(t)}else TweenMax.to(form,.2,{y:150,opacity:0,ease:Power2.easeOut,onComplete:function(){TweenMax.set(form,{visibility:"hidden",zIndex:1})}}),n.addClass("msg-thanks"),n.html("Thank you! You must confirm the subscription in your inbox.")}})}e($("#subscribe"),$("#subscribe-result"))});